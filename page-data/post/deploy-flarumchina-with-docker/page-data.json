{"componentChunkName":"component---theme-src-templates-post-template-jsx","path":"/post/deploy-flarumchina-with-docker/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"前期准备\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87\" aria-label=\"前期准备 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前期准备</h2>\n<p>服务器安装 Docker 和 Docker Compose</p>\n<p>参考教程：\n<a href=\"http://get.daocloud.io/#install-docker\">http://get.daocloud.io/#install-docker</a></p>\n<p>没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 120 分钟，足够学习使用</p>\n<p>路径：自有主机 -> 集群管理 -> 添加主机</p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic01.png' alt:'深度截图_选择区域_20170807083400' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 812px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.490566037735846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcklEQVQoz5WR3W4TMRCF8/6PgOCOl0ACiavCBXcgURIashCy2272z/bYnh/PIDcLrdQbOvqkkW2dM0fjDSKllGNMRGzPKSLZtF1/sz9sd/vjqSVmXItipogMCSFRzohERExUOyKVUohlw0zjOC2LA4DF+RDAh+B9wBRMkmRf0DvnnK9PztfmnGfmKpZSnPfTNMeUVTWm5DyY0Jtre3Glrz/Zy482xZpT9UlsVWORGphYahjORFrkMOjn3/q10y8nTaQXsdZaXar4eOoOh2a73f04NKrleQtTtRH0HGxJduft1tWQJJZ5BaUekR9uMhmXv+Juluac2xFv2tD0+XamBWgO5IDnQIPLC3BEjWgXAKvd/cLUCNHPQ9+ff576Yzvsm/Z70/7qpmM39RN0g78bwUWBKlNADVlXsZm9+yavrvDtNYVcZpAlyhLLPRJQgeoon/UfLinyY/EHfr+TRNU14MplyFN8VrxMfvx7RfU/UTUk+QMQeLXSLzsgWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"深度截图_选择区域_20170807083400\"\n        title=\"深度截图_选择区域_20170807083400\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/78e79/pic01.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/b6a9b/pic01.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png 812w\"\n        sizes=\"(max-width: 812px) 100vw, 812px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<!-- more -->\n<h2 id=\"安装-flarum\" style=\"position:relative;\"><a href=\"#%E5%AE%89%E8%A3%85-flarum\" aria-label=\"安装 flarum permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装 Flarum</h2>\n<p>我们使用到的镜像是 <a href=\"https://github.com/Raincal/docker-flarum-china\">raincal/docker-flarum-china</a></p>\n<h3 id=\"ports\" style=\"position:relative;\"><a href=\"#ports\" aria-label=\"ports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ports</h3>\n<p><code class=\"language-text\">8888</code></p>\n<h3 id=\"volume\" style=\"position:relative;\"><a href=\"#volume\" aria-label=\"volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Volume</h3>\n<ul>\n<li>/flarum/app/assets : FlarumChina 资源目录</li>\n<li>/flarum/app/extensions : FlarumChina 插件目录</li>\n</ul>\n<h3 id=\"环境变量\" style=\"position:relative;\"><a href=\"#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F\" aria-label=\"环境变量 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>环境变量</h3>\n<table>\n<thead>\n<tr>\n<th>变量</th>\n<th>描述</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>UID</strong></td>\n<td>Flarum user id</td>\n<td><em>optional</em></td>\n<td>991</td>\n</tr>\n<tr>\n<td><strong>GID</strong></td>\n<td>Flarum group id</td>\n<td><em>optional</em></td>\n<td>991</td>\n</tr>\n<tr>\n<td><strong>DEBUG</strong></td>\n<td>Flarum debug mode</td>\n<td><em>optional</em></td>\n<td>false</td>\n</tr>\n<tr>\n<td><strong>FORUM_URL</strong></td>\n<td>Forum URL</td>\n<td><strong>required</strong></td>\n<td>none</td>\n</tr>\n<tr>\n<td><strong>DB_HOST</strong></td>\n<td>MariaDB instance ip/hostname</td>\n<td><em>optional</em></td>\n<td>mariadb</td>\n</tr>\n<tr>\n<td><strong>DB_USER</strong></td>\n<td>MariaDB database username</td>\n<td><em>optional</em></td>\n<td>flarum</td>\n</tr>\n<tr>\n<td><strong>DB_NAME</strong></td>\n<td>MariaDB database name</td>\n<td><em>optional</em></td>\n<td>flarum</td>\n</tr>\n<tr>\n<td><strong>DB_PASS</strong></td>\n<td>MariaDB database password</td>\n<td><strong>required</strong></td>\n<td>none</td>\n</tr>\n<tr>\n<td><strong>DB_PREF</strong></td>\n<td>Flarum tables prefix</td>\n<td><em>optional</em></td>\n<td>none</td>\n</tr>\n<tr>\n<td><strong>UPLOAD_MAX_SIZE</strong></td>\n<td>The maximum size of an uploaded file</td>\n<td><em>optional</em></td>\n<td>50M</td>\n</tr>\n<tr>\n<td><strong>MEMORY_LIMIT</strong></td>\n<td>maximum amount of memory used by php</td>\n<td><em>optional</em></td>\n<td>128M</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"编写-docker-composeyml-文件\" style=\"position:relative;\"><a href=\"#%E7%BC%96%E5%86%99-docker-composeyml-%E6%96%87%E4%BB%B6\" aria-label=\"编写 docker composeyml 文件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>编写 docker-compose.yml 文件</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> flarum <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> flarum\n<span class=\"token function\">vi</span> docker-compose.yml</code></pre></div>\n<p>根据自身情况 修改</p>\n<p>FORUM_URL</p>\n<p>DB_PASS</p>\n<p>MYSQL_ROOT_PASSWORD</p>\n<p>MYSQL_PASSWORD</p>\n<p>等环境变量</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">flarum</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> raincal/docker<span class=\"token punctuation\">-</span>flarum<span class=\"token punctuation\">-</span>china<span class=\"token punctuation\">:</span>0.1.0<span class=\"token punctuation\">-</span>beta.7<span class=\"token punctuation\">-</span>stable\n  <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> flarum\n  <span class=\"token key atrule\">links</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> mariadb<span class=\"token punctuation\">:</span>mariadb\n  <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> FORUM_URL=https<span class=\"token punctuation\">:</span>//forum.domain.tld\n    <span class=\"token punctuation\">-</span> DB_PASS=123456\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> /mnt/docker/flarum/assets<span class=\"token punctuation\">:</span>/flarum/app/assets\n    <span class=\"token punctuation\">-</span> /mnt/docker/flarum/extensions<span class=\"token punctuation\">:</span>/flarum/app/extensions\n\n<span class=\"token key atrule\">mariadb</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">:</span><span class=\"token number\">10.1</span>\n  <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> mariadb\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> /mnt/docker/mysql/db<span class=\"token punctuation\">:</span>/var/lib/mysql\n  <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> MYSQL_ROOT_PASSWORD=123456\n    <span class=\"token punctuation\">-</span> MYSQL_DATABASE=flarum\n    <span class=\"token punctuation\">-</span> MYSQL_USER=flarum\n    <span class=\"token punctuation\">-</span> MYSQL_PASSWORD=123456\n\n<span class=\"token key atrule\">nginx</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wonderfall/boring<span class=\"token punctuation\">-</span>nginx\n  <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">links</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> flarum<span class=\"token punctuation\">:</span>flarum\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"80:8000\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"443:4430\"</span>\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/sites<span class=\"token punctuation\">-</span>enabled<span class=\"token punctuation\">:</span>/sites<span class=\"token punctuation\">-</span>enabled\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/conf<span class=\"token punctuation\">:</span>/conf.d\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/log<span class=\"token punctuation\">:</span>/var/log/nginx\n    <span class=\"token punctuation\">-</span> /mnt/docker/nginx/certs<span class=\"token punctuation\">:</span>/certs</code></pre></div>\n<h3 id=\"启动应用\" style=\"position:relative;\"><a href=\"#%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8\" aria-label=\"启动应用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>启动应用</h3>\n<p><code class=\"language-text\">docker-compose up -d</code></p>\n<p>若使用胶囊主机，可以到 自有主机 -> Stack -> 创建新 Stack</p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic02.png' alt:'深度截图_选择区域_20170807084450' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1060px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/bd44e/pic02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.77358490566038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAUlEQVQoz2P48ePHnz9//pMC/sEAw9dv3/78+TNlwoTc9PSy4oKSwvzi/LySwvyivJz87ExkVJibnZ6ceOL4sf/////9+/f///8MEGsd7ewYGBi4WJgZcANmZpDsnNmz////D9HFADHDx91NXJBPTUFWWkxYRkxYXJBPkJtDgIsdGQnzcjEzMKxasQxds4O9PQMDAwszYZvnzp2D0Pzv37/////PmTu/qrKmraW1vq6utqamtqamrramrrYWGdXU1BYVlx44cBDh598/fv3/9588wPD6x8e3vz5/+/bj85evX758/f79x28w+PXr129sAGInVPO2d+e2vj0Lij3SHQAA+fNtDT4qqMQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"深度截图_选择区域_20170807084450\"\n        title=\"深度截图_选择区域_20170807084450\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/77672/pic02.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/78e79/pic02.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/b6a9b/pic02.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/77672/pic02.png 1060w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/ce0a7/pic02.png 1590w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/bd44e/pic02.png 1643w\"\n        sizes=\"(max-width: 1060px) 100vw, 1060px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"设置-nginx-反向代理\" style=\"position:relative;\"><a href=\"#%E8%AE%BE%E7%BD%AE-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86\" aria-label=\"设置 nginx 反向代理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>设置 nginx 反向代理</h3>\n<p>通过 ssh 连接到胶囊主机</p>\n<p><code class=\"language-text\">ssh ubuntu@52.80.37.119</code></p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic03.png' alt:'深度截图_选择区域_20170807093749' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABIUlEQVQY03WQv04CQRDGeSYLa1/CxEoTCgofQWNhQUJLZWdFRakVlY2l9lqJcHv753aZ2WHvyHHLjuEkIZDwyxSTzHyZ75sOM9e/3zAerr4+mNk5W1grpcxFprRRSnvv+QSdevo1uzlT/a58vK7eX0JMRiqtlBCZMSYXIoRwUuxfn+3T3fz2Ir+/1INew4wVBq73K2nHpuVAXH2+zbrnetDLH65gPFxGzsRcW2ONXRTOWeuJANAjokciWjfNXszMNBmpfpcmI44NERVFgQuQqGdeWQJO6aTtoxkASCnABx1WYhn0sobQ0CohVR4REJ1zi5b1er29zDFuq81jtP6ZZtoigPdI1m0tN3GzaTPHlv8mpdRJh5RlSWVdx92vDl92zB9qGr606mw6FQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"深度截图_选择区域_20170807093749\"\n        title=\"深度截图_选择区域_20170807093749\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/78e79/pic03.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/b6a9b/pic03.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png 554w\"\n        sizes=\"(max-width: 554px) 100vw, 554px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker <span class=\"token builtin class-name\">exec</span> -it nginx ngxproxy\n\nWelcome to ngxproxy utility.\nWe're about to create a new virtual <span class=\"token function\">host</span> <span class=\"token punctuation\">(</span>AKA server block<span class=\"token punctuation\">)</span>.\n\nName: flarum\nDomain: forum.domain.tld\nWebroot <span class=\"token punctuation\">(</span>default is /<span class=\"token punctuation\">)</span>:\nContainer: flarum\nPort <span class=\"token punctuation\">(</span>default is <span class=\"token number\">80</span><span class=\"token punctuation\">)</span>: <span class=\"token number\">8888</span>\nHTTPS <span class=\"token punctuation\">[</span>y/n<span class=\"token punctuation\">]</span>: n\nMax body size <span class=\"token keyword\">in</span> MB <span class=\"token punctuation\">(</span>integer/null<span class=\"token punctuation\">)</span>: <span class=\"token number\">50</span>\n\nDone<span class=\"token operator\">!</span> flarum.conf has been generated.\nReload nginx now? <span class=\"token punctuation\">[</span>y/n<span class=\"token punctuation\">]</span>: y\nnginx successfully reloaded.</code></pre></div>\n<p>完成后访问外网IP 52.80.37.119，本地环境的话访问 localhost 开始安装 flarum</p>\n<p><strong>管理员密码需要大于8位</strong></p>\n<!-- {% imgurl 'deploy-flarumChina-with-docker/pic04.png' alt:'screencapture-joudo-tk-1502095912645imgurl '\n\n{% imgurl 'deploy-flarumChina-with-docker/pic05.png' alt:'screencapture-54-222-128-207-1502096436141' %} -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 540px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.71698113207546%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEwUlEQVRIx62Wy24cRRSG50F4gbxC1vACCJYgsUAIFghegA0KSJAIIUAICaFEIXECISYksT0eX2Ns4cACG9u5Oc6Mx2PPffpaXVXdXR+qmnF8d4RESZ+q+tQ5p09X/9VdBQBjDCbP7ZBg+HOaH71MOPot/q3zJCvTqCd/Ek58j3/jHMHI1/i3LhD89gXy0R8uxuSZy2FbYS9h5gyt8x+w+foZwuGv8C5/TDx1jWD4K9qfvUX70zfofvMhnQtvU3//LGJxpJ8wOy7hwCA3t4hWHmIiD7WxSjzza5/pm4i520TFIcTcHeTKIml1fVBhfjDhbts1/pd2OKawW51j926DOwohHVIq8iyzk3vzA5/9HKnw8J0fPq3y99pTdpodHj+rUak12Wl2+/MnxBRyY1A6dUiL6qPTDJEoolgipCYWkjhRKCkhSzGpxtheS3IZY7TqV5hmOV4o8ENBsxvS8SKHP7DZcbMTOB8vShCBT95rkFm8Zp92jczvuKoL/J/NQCEz62izgDb30WYRmS2SpIuofJFAzBEmv+PHcwi953OU+y5HzjaFlGWUuYsyJTTjBLJIJyoisnGq9euUa0OUt4Zo9obRlFBmvA/7KaEYIeOZfSk+OTsYGg4G9McdoDvom+SmQc5J1DHEFDIeo8w9RLqASOcJ5TyRnkflC3jRFG2vRJjMkGIfeX6wPAtoDjNHzpZN+A9JPkogJwhViZ4o4SclZF6i0Rlmc+cnuuFtUibdsigmTmCs/8ipWXVrp8w0Mp8iyfooM0Uoi8S6RMqMu9acxLRbx4yKTbiCpkikpgjkJD0xQS+eROaT1Jo32W4No/JJF6jMJPpYptyLyky5X6G90K6K6QOIdMJVbcf60Nx+tJlxy5GZil3DZTR3XFJfjg0oIvMi1Z0hthrXUKbonuJkbEEj5GxQEKqDLyoEyRaBqOIPsGNnc/atPdsh/IFfLyojtU8hEClNT9EJNNttQbUZsVkPaXQltZag3klo+/oUbGxKZbtHEEkKUaJoB4LufsJ9fXho7gQ6gSBRKYUgljS9mGrT49lOl0q956h3Q1q+oOXFL8aPXY5YagpS50RJRiQGJHsImTvi5MVYf53aDyxVcpbIWcVqcpecFWS6hMqW3Ph0VslZxtCyOlxGmjvuq9ETY7TCMbykSJIVKdeuui+Olc3p2J02QmY2bMI1lJlAm1mUmXEitVtNM0vKrOudfdDv+hxk1u2izGxaYS+hsZt/nECN0YlG8eUoMh+jsn2Fjepl1suXKG/9SLl2hW44TOaEPLYPK+67fWHLdJtQrhGpR0Ty0YE+EA8cvmPNjUP5sO9zhAforHNQ2FbMz7YDKlbYPemEvtWKnYDt/EnitsIu17r7hO33BWzF2fZj15/GccK2cUJpW6FyorRJLdWmz2bDo9mLqbUCNusejW5Eo9en5YnnvhYr/k6QUNlpE8QJBSFTvEjix8qxu416YUIsUzLDHkCUaPx9/n4sn8e5rXfiDxZYr2xz6ZcJrt+9x9DtWa7dmaXd9U89WBUOH3gs9hhi2+XhKV46+yavvnuO1977hDOvvMNfy0/cXJYdPSy5s81xxnxwml19XOHLi7e4eKPEDz+P893VUeqt/mEpPybOJvwXozJLTVLQMcEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screencapture-joudo-tk-1502095912645imgurl\"\n        title=\"screencapture-joudo-tk-1502095912645imgurl\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/78e79/pic04.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/b6a9b/pic04.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png 540w\"\n        sizes=\"(max-width: 540px) 100vw, 540px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1060px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/d56e1/pic05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABF0lEQVQoz22R206EMBCG+/4v4hNsvDUx0UQvNuqFyRIRFllAztBzob8pZJElTPKl7cz8M22HCKnR9AJuHUeLYRhvcD5rLbQZkOQt4qxBUbNJw4SCEBoNpah4C2NGkLTokeTdgjtnjnLmfKkQxiWitJ5Ir7FNXlrMepJXrptE3TnEJPjJGvhRgSAu4YW/+PQTnIIMXpjjKyqXmCtwWV1kKnhOSjwdPby8+3j9+AZlClXL0PYCXGhwqf9XqcHEjPMJaWaUQUsFOipBvCDF3eEZ949vODwcobRB3TIoPWDf7K6XcjU1JO7j3UB2pdYuaK2hlJowxtzEHFcjjAswLjHaecLbpK1gr+F6T6SUkFItD1mL9wR7Ddf2B1bRarVTnsEcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screencapture-54-222-128-207-1502096436141\"\n        title=\"screencapture-54-222-128-207-1502096436141\"\n        src=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/77672/pic05.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/78e79/pic05.png 265w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/b6a9b/pic05.png 530w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/77672/pic05.png 1060w,\nhttps://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/d56e1/pic05.png 1130w\"\n        sizes=\"(max-width: 1060px) 100vw, 1060px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","excerpt":"前期准备 服务器安装 Docker 和 Docker Compose 参考教程：\nhttp://get.daocloud.io/#install-docker 没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 12…","frontmatter":{"date":"08月07, 2017","title":"使用 Docker 部署 FlarumChina","tags":["Docker","Linux"]}}},"pageContext":{"slug":"/post/deploy-flarumchina-with-docker/","prev":{"slug":"/post/lodash/","title":"10 个可用 ES6 替代的 Lodash 特性"},"next":{"slug":"/post/vscode-icon-share/","title":"VSCode icon 分享"}}},"staticQueryHashes":["3020019608","3128451518"]}