<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" /><meta httpEquiv="x-ua-compatible" content="ie=edge" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><style data-href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/styles.e89283b2af650ff2ea3f.css" id="gatsby-global-css">.footer-module--footer--OoKls{font-size:.9em;line-height:1.8;padding:15px;text-align:center}body{margin:0;padding:0;color:#666;-webkit-text-size-adjust:none;transition:transform .2s cubic-bezier(.4,.01,.165,.99);-webkit-tap-highlight-color:transparent;font-family:Helvetica Neue,Arial,Hiragino Sans GB,STHeiti,Microsoft YaHei;-webkit-font-smoothing:antialiased;-webkit-overflow-scrolling:touch}body,html{width:100%;height:100%;font-size:16px}h1,h2,h3,h4,h5,h6{margin:0;padding:0}a,a:hover{color:#1976d2;text-decoration:none}ol,ul{padding:0}ul{margin-left:25px}*{box-sizing:border-box}code,pre{-webkit-font-smoothing:initial}table{margin-left:0;margin-right:0;margin-top:0;padding:0;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}td,th,thead{text-align:left}td,th{border:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}blockquote{padding:0 0 0 calc(.8125rem - 1px);margin:0 0 .8125rem;border-left:4px solid rgba(0,0,0,.13);color:rgba(0,0,0,.53)}.main-module--main--3Q4Am{max-width:1390px;padding:0 40px 0 290px}@media (max-width:1024px){.main-module--main--3Q4Am{width:100%;padding-left:115px}}@media (max-width:768px){.main-module--main--3Q4Am{padding:6px 20px 0;word-wrap:break-word}}@font-face{font-family:iconfont;font-display:block;src:url(data:application/font-woff2;charset=utf-8;base64,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) format("woff2"),url(/fonts/iconfont.woff) format("woff"),url(/fonts/iconfont.ttf) format("truetype"),url(/fonts/iconfont.svg#iconfont) format("svg"),url(/fonts/iconfont.eot) format("embedded-opentype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}.icon-archive:before{content:"\e601"}.icon-user:before{content:"\e602"}.icon-rss-v:before{content:"\e603"}.icon-tags:before{content:"\e604"}.icon-home:before{content:"\e605"}.icon-search:before{content:"\e606"}.icon-mail:before{content:"\e609"}.icon-twitter-v:before{content:"\e60a"}.icon-linkedin:before{content:"\e60b"}.icon-stackoverflow:before{content:"\e60c"}.icon-github-v:before{content:"\e60d"}.icon-facebook:before{content:"\e60e"}.icon-right:before{content:"\e60f"}.icon-left:before{content:"\e610"}.icon-link:before{content:"\e611"}.icon-https:before{content:"\e612"}.sidebar-module--sidebar--3ZmBP{position:fixed;width:250px;height:100%;overflow:hidden;background:#202020;z-index:5}@media(max-width:1024px){.sidebar-module--sidebar--3ZmBP{width:75px}}@media(max-width:768px){.sidebar-module--sidebar--3ZmBP{position:relative;width:100%;height:44px;background-color:#3b5998}}.buttons-module--buttons--jmSMN{padding:0;list-style:none;margin-left:0;margin-top:0}.buttons-module--buttons--jmSMN li{height:44px;line-height:44px;font-size:16px}.buttons-module--buttons--jmSMN li a{padding-left:25px;color:#999;display:block;transition:color .2s cubic-bezier(.4,.01,.165,.99)}.buttons-module--buttons--jmSMN li a:hover{color:hsla(0,0%,60%,.8)}.buttons-module--buttons--jmSMN li a i{font-size:20px;text-align:center;width:25px;height:44px;margin-right:20px;font-style:normal;display:inline-block}.buttons-module--buttons--jmSMN li .buttons-module--inline--2Twv-{display:inline-block;width:40px}@media (max-width:1024px){.buttons-module--title--XFerc{display:none}}@media(max-width:768px){.buttons-module--buttons--jmSMN:nth-child(3){display:none}.buttons-module--buttons--jmSMN{display:flex}.buttons-module--buttons--jmSMN li{display:flex;flex:1;justify-content:center}.buttons-module--buttons--jmSMN li a{width:100%;padding:0;text-align:center}.buttons-module--buttons--jmSMN li a i{margin:0;color:#182543}.buttons-module--active--QFbLc{background:#243c6d}.buttons-module--buttons--jmSMN .buttons-module--active--QFbLc i{color:#fff}.buttons-module--title--XFerc{display:none}}.profile-module--profile--3Aw9j{padding:40px 0 10px}@media (max-width:768px){.profile-module--profile--3Aw9j{display:none}}.profile-module--avatar--3PojC{width:140px;height:140px;display:block;border-radius:70px;margin:0 auto}@media (max-width:1024px){.profile-module--avatar--3PojC{width:40px;height:40px}}@media (max-width:768px){.profile-module--avatar--3PojC{width:100px;height:100px}}.profile-module--title--9w03U{display:block;padding:10px 0;text-align:center;font-size:18px;color:#999}@media (max-width:1024px){.profile-module--title--9w03U{display:none}}:root{--dark:#282c34;--white:#fff;--comment:#b2b2b2;--keyword:#ef3b7d;--lineHighlight:#353b45;--primitive:#5a9bcf;--string:#8dc891;--variable:#d7deea;--boolean:#ff8b50;--punctuation:#88c6be;--tag:#fc929e;--function:#79b6f2;--className:#fac863;--method:#69c;--operator:#a77afe}.gatsby-highlight{font-family:source-code-pro,Menlo,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:.85rem;background:#282c34;background:var(--dark);color:#fff;color:var(--white);border-radius:5px;-moz-tab-size:1.5em;-o-tab-size:1.5em;tab-size:1.5em;position:relative}@media (max-width:480px){.gatsby-highlight{margin:0 -20px;border-radius:0}}.gatsby-highlight:before{position:absolute;top:0;right:20px;padding:1px 10px;font-size:12px;color:#444;font-weight:700;letter-spacing:.8px;text-transform:uppercase;border-radius:0 0 5px 5px;background:#ddd}@media (max-width:480px){.gatsby-highlight:before{background-color:transparent!important;color:hsla(0,0%,86.7%,.09804);top:10px;right:10px;padding:0;font-size:30px;line-height:30px}}.gatsby-highlight[data-language=javascript]:before,.gatsby-highlight[data-language=js]:before{content:"js";background:#f7df1e}.gatsby-highlight[data-language=jsx]:before{content:"jsx";background:#61dafb}.gatsby-highlight[data-language=graphql]:before{content:"GraphQL";background:#e10098;color:#fff;font-weight:400}.gatsby-highlight[data-language=html]:before{content:"html";background:#005a9c;color:#fff;font-weight:400}.gatsby-highlight[data-language=css]:before{content:"css";background:#ff9800;color:#fff;font-weight:400}.gatsby-highlight[data-language=shell]:before{content:"shell"}.gatsby-highlight[data-language=sh]:before{content:"sh"}.gatsby-highlight[data-language=bash]:before{content:"bash"}.gatsby-highlight[data-language=yaml]:before{content:"yaml";background:#ffa8df}.gatsby-highlight[data-language=markdown]:before{content:"md"}.gatsby-highlight[data-language=json5]:before,.gatsby-highlight[data-language=json]:before{content:"json";background:linen}.gatsby-highlight[data-language=diff]:before{content:"diff";background:#e6ffed}.gatsby-highlight[data-language=text]:before{content:"text";background:#fff}.gatsby-highlight[data-language=flow]:before{content:"flow";background:#e8bd36}.gatsby-highlight pre[class*=language-]{background-color:transparent;line-height:1.5;padding:20px;margin:.85rem 0;overflow:auto;-webkit-overflow-scrolling:touch}.gatsby-highlight pre code{display:block;float:left;min-width:100%;font-family:source-code-pro,Menlo,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}.gatsby-highlight-code-line{background-color:#353b45;background-color:var(--lineHighlight);display:block;margin:0 -20px;padding:.125rem 20px}.token.attr-name{color:#ef3b7d;color:var(--keyword)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#b2b2b2;color:var(--comment)}.token.constant,.token.deleted,.token.function-name,.token.property,.token.symbol{color:#5a9bcf;color:var(--primitive)}.token.boolean,.token.number{color:#ff8b50;color:var(--boolean)}.token.tag{color:#fc929e;color:var(--tag)}.token.string{color:#8dc891;color:var(--string)}.token.punctuation{color:#88c6be;color:var(--punctuation)}.token.builtin,.token.char,.token.inserted,.token.selector{color:var(--char)}.token.function{color:#79b6f2;color:var(--function)}.token.operator{color:#a77afe;color:var(--operator)}.token.entity,.token.url,.token.variable{color:#d7deea;color:var(--variable)}.token.attr-value{color:#8dc891;color:var(--string)}.token.keyword{color:#ef3b7d;color:var(--keyword)}.token.atrule,.token.class-name{color:#fac863;color:var(--className)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.table-wrapper{margin-bottom:1.45rem;overflow-x:auto;-webkit-overflow-scrolling:touch}.intro-module--intro--1_pGE{background-color:#f6f9fa;color:#999;margin-bottom:0;padding:20px 30px;text-align:center;font-size:1.5rem;font-weight:400}.posts-module--article--1UcAD{padding:30px 0;border-top:1px solid #fff;border-bottom:1px solid #ddd}@media(max-width:768px){.posts-module--article--1UcAD{padding:10px 0}}.posts-module--article--1UcAD img{display:block;max-width:100%;padding:0;margin:0 auto}.posts-module--meta--1wXJx{float:right;font-size:.9em;color:#555;line-height:2;width:auto}@media(max-width:768px){.posts-module--meta--1wXJx{display:none}}.posts-module--content--1GXl3{word-wrap:break-word;line-height:1.8;-webkit-font-smoothing:antialiased}.posts-module--more--1rINp{margin:15px 0 0}@media(max-width:768px){.posts-module--more--1rINp{font-size:14px}}.posts-module--toc--2YsKF{float:right;max-width:260px;min-width:120px;padding:6px;margin:0 0 15px 20px;font-size:14px;border:1px solid #e2e2e2}.posts-module--toc--2YsKF:before{content:"文章目录";font-weight:700;border-bottom:1px solid #e2e2e2;display:block}.posts-module--toc--2YsKF>ul{margin:.5em .5em .5em 1.5em}.title-module--title--KwS0p{font-size:2em;font-weight:300;line-height:35px;margin-bottom:25px;color:#333}@media(max-width:768px){.title-module--title--KwS0p{font-size:1.8em}}@media(max-width:480px){.title-module--title--KwS0p{font-size:1.6em}}.title-module--title--KwS0p a{color:inherit;text-decoration:none}.title-module--title--KwS0p a:hover{color:#1976d2}.tag-module--tag--wLwSF{display:inline-block;font-size:14px;padding:0 15px;height:40px;line-height:40px;color:rgba(36,121,204,.8);border:1px solid rgba(36,121,204,.8);border-radius:4px;margin:0 15px 10px 0;text-decoration:none;transition:color .2s cubic-bezier(.4,.01,.165,.99),border .2s cubic-bezier(.4,.01,.165,.99)}</style><meta name="generator" content="Gatsby 3.3.1" /><title data-react-helmet>使用 Docker 部署 FlarumChina | Raincal's Blog</title><meta data-react-helmet name="description" content="前期准备 服务器安装 Docker 和 Docker Compose 参考教程：
http://get.daocloud.io/#install-docker 没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 12…" /><meta data-react-helmet property="og:title" content="使用 Docker 部署 FlarumChina" /><meta data-react-helmet property="og:description" content="前期准备 服务器安装 Docker 和 Docker Compose 参考教程：
http://get.daocloud.io/#install-docker 没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 12…" /><meta data-react-helmet property="og:type" content="website" /><meta data-react-helmet name="twitter:card" content="summary" /><meta data-react-helmet name="twitter:creator" content="Raincal" /><meta data-react-helmet name="twitter:title" content="使用 Docker 部署 FlarumChina" /><meta data-react-helmet name="twitter:description" content="前期准备 服务器安装 Docker 和 Docker Compose 参考教程：
http://get.daocloud.io/#install-docker 没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 12…" /><meta data-react-helmet name="keywords" content="Docker, Linux" /><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/rss.xml" /><link rel="sitemap" type="application/xml" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/sitemap.xml" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/webpack-runtime-2dcd2296a0c510d5768b.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/framework-44458f6db894f6a2b3e3.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/app-55850feab0d8b528ea96.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/commons-49365db7d4a26f7e8692.js" /><link as="script" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/component---theme-src-templates-post-template-jsx-27bf3499f5f2241bcd7b.js" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/post/deploy-flarumchina-with-docker/page-data.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/sq/d/3020019608.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/sq/d/3128451518.json" crossOrigin="anonymous" /><link as="fetch" rel="preload" href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/page-data/app-data.json" crossOrigin="anonymous" /></head><body><div id="___gatsby"><div style="outline: none;" tabIndex="-1" id="gatsby-focus-wrapper"><div><nav class="sidebar-module--sidebar--3ZmBP"><div class="profile-module--profile--3Aw9j"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9Ii0yNy45NjIlIiB4Mj0iNTAlIiB5Mj0iMTY0LjMzOSUiIGlkPSJhIj48c3RvcCBzdG9wLWNvbG9yPSIjM0E3QkQ1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iIzAwRDJGRiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjE3Mi43NiUiIHgyPSI1MCUiIHkyPSItNDIuODUxJSIgaWQ9ImIiPjxzdG9wIHN0b3AtY29sb3I9IiMzQTdCRDUiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjMDBEMkZGIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6Y29sb3IiIHN0cm9rZS13aWR0aD0iODAuMzE0IiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTM2OC4yMzggMzQxLjgwNmMwLTM2Ljk2My0zNy4zNDUtMTE0Ljg5MS0xMTIuMDM3LTIzMy43ODQtNzQuNjkyIDExOC44OTMtMTEyLjAzOCAxOTYuODIxLTExMi4wMzggMjMzLjc4NCIgc3Ryb2tlPSJ1cmwoI2EpIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiLz48cGF0aCBkPSJNMTQ0LjE2MyAzNDEuNzM1YzAgNTUuNDQ1IDUwLjE2MSAxMDAuMzkyIDExMi4wMzggMTAwLjM5MmgwYzYxLjg3NiAwIDExMi4wMzctNDQuOTQ3IDExMi4wMzctMTAwLjM5MiIgc3Ryb2tlPSJ1cmwoI2IpIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiLz48L2c+PC9zdmc+" alt="avatar" class="profile-module--avatar--3PojC" /></a><span class="profile-module--title--9w03U">Raincal's Blog</span></div><ul class="buttons-module--buttons--jmSMN"><li><a aria-label="首页" href="/"><i class="iconfont icon-home"></i><span class="buttons-module--title--XFerc">首页</span></a></li><li><a aria-label="归档" href="/archives/"><i class="iconfont icon-archive"></i><span class="buttons-module--title--XFerc">归档</span></a></li><li><a aria-label="标签" href="/tags/"><i class="iconfont icon-tags"></i><span class="buttons-module--title--XFerc">标签</span></a></li><li><a aria-label="关于" href="/about/"><i class="iconfont icon-user"></i><span class="buttons-module--title--XFerc">关于</span></a></li><li><a aria-label="友链" href="/links/"><i class="iconfont icon-link"></i><span class="buttons-module--title--XFerc">友链</span></a></li></ul><ul class="buttons-module--buttons--jmSMN"><li><a href="https://github.com/Raincal" title="GitHub" class="buttons-module--inline--2Twv-" target="_blank" rel="noopener noreferrer"><i class="iconfont icon-github-v"></i></a><a href="https://blog.raincal.com/rss.xml" title="RSS" class="buttons-module--inline--2Twv-" target="_blank" rel="noopener noreferrer"><i class="iconfont icon-rss-v"></i></a><a href="https://www.google.com/search?q=site%3Ablog.raincal.com" title="Search" class="buttons-module--inline--2Twv-" target="_blank" rel="noopener noreferrer"><i class="iconfont icon-search"></i></a></li></ul></nav><div class="main-module--main--3Q4Am"><article class="posts-module--article--1UcAD"><div class="posts-module--meta--1wXJx"><div>08月07, 2017</div></div><h1 class="title-module--title--KwS0p">使用 Docker 部署 FlarumChina</h1><div class="posts-module--content--1GXl3"><div class="blog-post-content"><h2 id="前期准备" style="position:relative;"><a href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87" aria-label="前期准备 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>前期准备</h2>
<p>服务器安装 Docker 和 Docker Compose</p>
<p>参考教程：
<a href="http://get.daocloud.io/#install-docker">http://get.daocloud.io/#install-docker</a></p>
<p>没有服务器的可以在本地安装 Docker 或使用 DaoCloud 的胶囊主机, 能免费体验 120 分钟，足够学习使用</p>
<p>路径：自有主机 -> 集群管理 -> 添加主机</p>
<!-- {% imgurl 'deploy-flarumChina-with-docker/pic01.png' alt:'深度截图_选择区域_20170807083400' %} -->
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 812px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 58.490566037735846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcklEQVQoz5WR3W4TMRCF8/6PgOCOl0ACiavCBXcgURIashCy2272z/bYnh/PIDcLrdQbOvqkkW2dM0fjDSKllGNMRGzPKSLZtF1/sz9sd/vjqSVmXItipogMCSFRzohERExUOyKVUohlw0zjOC2LA4DF+RDAh+B9wBRMkmRf0DvnnK9PztfmnGfmKpZSnPfTNMeUVTWm5DyY0Jtre3Glrz/Zy482xZpT9UlsVWORGphYahjORFrkMOjn3/q10y8nTaQXsdZaXar4eOoOh2a73f04NKrleQtTtRH0HGxJduft1tWQJJZ5BaUekR9uMhmXv+Juluac2xFv2tD0+XamBWgO5IDnQIPLC3BEjWgXAKvd/cLUCNHPQ9+ff576Yzvsm/Z70/7qpmM39RN0g78bwUWBKlNADVlXsZm9+yavrvDtNYVcZpAlyhLLPRJQgeoon/UfLinyY/EHfr+TRNU14MplyFN8VrxMfvx7RfU/UTUk+QMQeLXSLzsgWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="深度截图_选择区域_20170807083400"
        title="深度截图_选择区域_20170807083400"
        src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png"
        srcset="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/78e79/pic01.png 265w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/b6a9b/pic01.png 530w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/7c2d77b8e89cbef6b1236d62ccff8fa9/63ec5/pic01.png 812w"
        sizes="(max-width: 812px) 100vw, 812px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<!-- more -->
<h2 id="安装-flarum" style="position:relative;"><a href="#%E5%AE%89%E8%A3%85-flarum" aria-label="安装 flarum permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>安装 Flarum</h2>
<p>我们使用到的镜像是 <a href="https://github.com/Raincal/docker-flarum-china">raincal/docker-flarum-china</a></p>
<h3 id="ports" style="position:relative;"><a href="#ports" aria-label="ports permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ports</h3>
<p><code class="language-text">8888</code></p>
<h3 id="volume" style="position:relative;"><a href="#volume" aria-label="volume permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Volume</h3>
<ul>
<li>/flarum/app/assets : FlarumChina 资源目录</li>
<li>/flarum/app/extensions : FlarumChina 插件目录</li>
</ul>
<h3 id="环境变量" style="position:relative;"><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" aria-label="环境变量 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>环境变量</h3>
<table>
<thead>
<tr>
<th>变量</th>
<th>描述</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>UID</strong></td>
<td>Flarum user id</td>
<td><em>optional</em></td>
<td>991</td>
</tr>
<tr>
<td><strong>GID</strong></td>
<td>Flarum group id</td>
<td><em>optional</em></td>
<td>991</td>
</tr>
<tr>
<td><strong>DEBUG</strong></td>
<td>Flarum debug mode</td>
<td><em>optional</em></td>
<td>false</td>
</tr>
<tr>
<td><strong>FORUM_URL</strong></td>
<td>Forum URL</td>
<td><strong>required</strong></td>
<td>none</td>
</tr>
<tr>
<td><strong>DB_HOST</strong></td>
<td>MariaDB instance ip/hostname</td>
<td><em>optional</em></td>
<td>mariadb</td>
</tr>
<tr>
<td><strong>DB_USER</strong></td>
<td>MariaDB database username</td>
<td><em>optional</em></td>
<td>flarum</td>
</tr>
<tr>
<td><strong>DB_NAME</strong></td>
<td>MariaDB database name</td>
<td><em>optional</em></td>
<td>flarum</td>
</tr>
<tr>
<td><strong>DB_PASS</strong></td>
<td>MariaDB database password</td>
<td><strong>required</strong></td>
<td>none</td>
</tr>
<tr>
<td><strong>DB_PREF</strong></td>
<td>Flarum tables prefix</td>
<td><em>optional</em></td>
<td>none</td>
</tr>
<tr>
<td><strong>UPLOAD_MAX_SIZE</strong></td>
<td>The maximum size of an uploaded file</td>
<td><em>optional</em></td>
<td>50M</td>
</tr>
<tr>
<td><strong>MEMORY_LIMIT</strong></td>
<td>maximum amount of memory used by php</td>
<td><em>optional</em></td>
<td>128M</td>
</tr>
</tbody>
</table>
<h3 id="编写-docker-composeyml-文件" style="position:relative;"><a href="#%E7%BC%96%E5%86%99-docker-composeyml-%E6%96%87%E4%BB%B6" aria-label="编写 docker composeyml 文件 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>编写 docker-compose.yml 文件</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> flarum <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> flarum
<span class="token function">vi</span> docker-compose.yml</code></pre></div>
<p>根据自身情况 修改</p>
<p>FORUM_URL</p>
<p>DB_PASS</p>
<p>MYSQL_ROOT_PASSWORD</p>
<p>MYSQL_PASSWORD</p>
<p>等环境变量</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">flarum</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> raincal/docker<span class="token punctuation">-</span>flarum<span class="token punctuation">-</span>china<span class="token punctuation">:</span>0.1.0<span class="token punctuation">-</span>beta.7<span class="token punctuation">-</span>stable
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> flarum
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mariadb<span class="token punctuation">:</span>mariadb
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> FORUM_URL=https<span class="token punctuation">:</span>//forum.domain.tld
    <span class="token punctuation">-</span> DB_PASS=123456
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /mnt/docker/flarum/assets<span class="token punctuation">:</span>/flarum/app/assets
    <span class="token punctuation">-</span> /mnt/docker/flarum/extensions<span class="token punctuation">:</span>/flarum/app/extensions

<span class="token key atrule">mariadb</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">:</span><span class="token number">10.1</span>
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mariadb
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /mnt/docker/mysql/db<span class="token punctuation">:</span>/var/lib/mysql
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD=123456
    <span class="token punctuation">-</span> MYSQL_DATABASE=flarum
    <span class="token punctuation">-</span> MYSQL_USER=flarum
    <span class="token punctuation">-</span> MYSQL_PASSWORD=123456

<span class="token key atrule">nginx</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> wonderfall/boring<span class="token punctuation">-</span>nginx
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> flarum<span class="token punctuation">:</span>flarum
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">"80:8000"</span>
    <span class="token punctuation">-</span> <span class="token string">"443:4430"</span>
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /mnt/docker/nginx/sites<span class="token punctuation">-</span>enabled<span class="token punctuation">:</span>/sites<span class="token punctuation">-</span>enabled
    <span class="token punctuation">-</span> /mnt/docker/nginx/conf<span class="token punctuation">:</span>/conf.d
    <span class="token punctuation">-</span> /mnt/docker/nginx/log<span class="token punctuation">:</span>/var/log/nginx
    <span class="token punctuation">-</span> /mnt/docker/nginx/certs<span class="token punctuation">:</span>/certs</code></pre></div>
<h3 id="启动应用" style="position:relative;"><a href="#%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8" aria-label="启动应用 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>启动应用</h3>
<p><code class="language-text">docker-compose up -d</code></p>
<p>若使用胶囊主机，可以到 自有主机 -> Stack -> 创建新 Stack</p>
<!-- {% imgurl 'deploy-flarumChina-with-docker/pic02.png' alt:'深度截图_选择区域_20170807084450' %} -->
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1060px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/bd44e/pic02.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 43.77358490566038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAUlEQVQoz2P48ePHnz9//pMC/sEAw9dv3/78+TNlwoTc9PSy4oKSwvzi/LySwvyivJz87ExkVJibnZ6ceOL4sf/////9+/f///8MEGsd7ewYGBi4WJgZcANmZpDsnNmz////D9HFADHDx91NXJBPTUFWWkxYRkxYXJBPkJtDgIsdGQnzcjEzMKxasQxds4O9PQMDAwszYZvnzp2D0Pzv37/////PmTu/qrKmraW1vq6utqamtqamrramrrYWGdXU1BYVlx44cBDh598/fv3/9588wPD6x8e3vz5/+/bj85evX758/f79x28w+PXr129sAGInVPO2d+e2vj0Lij3SHQAA+fNtDT4qqMQAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="深度截图_选择区域_20170807084450"
        title="深度截图_选择区域_20170807084450"
        src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/77672/pic02.png"
        srcset="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/78e79/pic02.png 265w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/b6a9b/pic02.png 530w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/77672/pic02.png 1060w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/ce0a7/pic02.png 1590w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/8465218cc652ec0fab9b0dbb96b93448/bd44e/pic02.png 1643w"
        sizes="(max-width: 1060px) 100vw, 1060px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h3 id="设置-nginx-反向代理" style="position:relative;"><a href="#%E8%AE%BE%E7%BD%AE-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86" aria-label="设置 nginx 反向代理 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置 nginx 反向代理</h3>
<p>通过 ssh 连接到胶囊主机</p>
<p><code class="language-text">ssh ubuntu@52.80.37.119</code></p>
<!-- {% imgurl 'deploy-flarumChina-with-docker/pic03.png' alt:'深度截图_选择区域_20170807093749' %} -->
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABIUlEQVQY03WQv04CQRDGeSYLa1/CxEoTCgofQWNhQUJLZWdFRakVlY2l9lqJcHv753aZ2WHvyHHLjuEkIZDwyxSTzHyZ75sOM9e/3zAerr4+mNk5W1grpcxFprRRSnvv+QSdevo1uzlT/a58vK7eX0JMRiqtlBCZMSYXIoRwUuxfn+3T3fz2Ir+/1INew4wVBq73K2nHpuVAXH2+zbrnetDLH65gPFxGzsRcW2ONXRTOWeuJANAjokciWjfNXszMNBmpfpcmI44NERVFgQuQqGdeWQJO6aTtoxkASCnABx1WYhn0sobQ0CohVR4REJ1zi5b1er29zDFuq81jtP6ZZtoigPdI1m0tN3GzaTPHlv8mpdRJh5RlSWVdx92vDl92zB9qGr606mw6FQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="深度截图_选择区域_20170807093749"
        title="深度截图_选择区域_20170807093749"
        src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png"
        srcset="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/78e79/pic03.png 265w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/b6a9b/pic03.png 530w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/fb85222819e683c9f0698f7068659400/04abd/pic03.png 554w"
        sizes="(max-width: 554px) 100vw, 554px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">docker <span class="token builtin class-name">exec</span> -it nginx ngxproxy

Welcome to ngxproxy utility.
We're about to create a new virtual <span class="token function">host</span> <span class="token punctuation">(</span>AKA server block<span class="token punctuation">)</span>.

Name: flarum
Domain: forum.domain.tld
Webroot <span class="token punctuation">(</span>default is /<span class="token punctuation">)</span>:
Container: flarum
Port <span class="token punctuation">(</span>default is <span class="token number">80</span><span class="token punctuation">)</span>: <span class="token number">8888</span>
HTTPS <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span>: n
Max body size <span class="token keyword">in</span> MB <span class="token punctuation">(</span>integer/null<span class="token punctuation">)</span>: <span class="token number">50</span>

Done<span class="token operator">!</span> flarum.conf has been generated.
Reload nginx now? <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span>: y
nginx successfully reloaded.</code></pre></div>
<p>完成后访问外网IP 52.80.37.119，本地环境的话访问 localhost 开始安装 flarum</p>
<p><strong>管理员密码需要大于8位</strong></p>
<!-- {% imgurl 'deploy-flarumChina-with-docker/pic04.png' alt:'screencapture-joudo-tk-1502095912645imgurl '

{% imgurl 'deploy-flarumChina-with-docker/pic05.png' alt:'screencapture-54-222-128-207-1502096436141' %} -->
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 540px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 174.71698113207546%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEwUlEQVRIx62Wy24cRRSG50F4gbxC1vACCJYgsUAIFghegA0KSJAIIUAICaFEIXECISYksT0eX2Ns4cACG9u5Oc6Mx2PPffpaXVXdXR+qmnF8d4RESZ+q+tQ5p09X/9VdBQBjDCbP7ZBg+HOaH71MOPot/q3zJCvTqCd/Ek58j3/jHMHI1/i3LhD89gXy0R8uxuSZy2FbYS9h5gyt8x+w+foZwuGv8C5/TDx1jWD4K9qfvUX70zfofvMhnQtvU3//LGJxpJ8wOy7hwCA3t4hWHmIiD7WxSjzza5/pm4i520TFIcTcHeTKIml1fVBhfjDhbts1/pd2OKawW51j926DOwohHVIq8iyzk3vzA5/9HKnw8J0fPq3y99pTdpodHj+rUak12Wl2+/MnxBRyY1A6dUiL6qPTDJEoolgipCYWkjhRKCkhSzGpxtheS3IZY7TqV5hmOV4o8ENBsxvS8SKHP7DZcbMTOB8vShCBT95rkFm8Zp92jczvuKoL/J/NQCEz62izgDb30WYRmS2SpIuofJFAzBEmv+PHcwi953OU+y5HzjaFlGWUuYsyJTTjBLJIJyoisnGq9euUa0OUt4Zo9obRlFBmvA/7KaEYIeOZfSk+OTsYGg4G9McdoDvom+SmQc5J1DHEFDIeo8w9RLqASOcJ5TyRnkflC3jRFG2vRJjMkGIfeX6wPAtoDjNHzpZN+A9JPkogJwhViZ4o4SclZF6i0Rlmc+cnuuFtUibdsigmTmCs/8ipWXVrp8w0Mp8iyfooM0Uoi8S6RMqMu9acxLRbx4yKTbiCpkikpgjkJD0xQS+eROaT1Jo32W4No/JJF6jMJPpYptyLyky5X6G90K6K6QOIdMJVbcf60Nx+tJlxy5GZil3DZTR3XFJfjg0oIvMi1Z0hthrXUKbonuJkbEEj5GxQEKqDLyoEyRaBqOIPsGNnc/atPdsh/IFfLyojtU8hEClNT9EJNNttQbUZsVkPaXQltZag3klo+/oUbGxKZbtHEEkKUaJoB4LufsJ9fXho7gQ6gSBRKYUgljS9mGrT49lOl0q956h3Q1q+oOXFL8aPXY5YagpS50RJRiQGJHsImTvi5MVYf53aDyxVcpbIWcVqcpecFWS6hMqW3Ph0VslZxtCyOlxGmjvuq9ETY7TCMbykSJIVKdeuui+Olc3p2J02QmY2bMI1lJlAm1mUmXEitVtNM0vKrOudfdDv+hxk1u2izGxaYS+hsZt/nECN0YlG8eUoMh+jsn2Fjepl1suXKG/9SLl2hW44TOaEPLYPK+67fWHLdJtQrhGpR0Ty0YE+EA8cvmPNjUP5sO9zhAforHNQ2FbMz7YDKlbYPemEvtWKnYDt/EnitsIu17r7hO33BWzF2fZj15/GccK2cUJpW6FyorRJLdWmz2bDo9mLqbUCNusejW5Eo9en5YnnvhYr/k6QUNlpE8QJBSFTvEjix8qxu416YUIsUzLDHkCUaPx9/n4sn8e5rXfiDxZYr2xz6ZcJrt+9x9DtWa7dmaXd9U89WBUOH3gs9hhi2+XhKV46+yavvnuO1977hDOvvMNfy0/cXJYdPSy5s81xxnxwml19XOHLi7e4eKPEDz+P893VUeqt/mEpPybOJvwXozJLTVLQMcEAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="screencapture-joudo-tk-1502095912645imgurl"
        title="screencapture-joudo-tk-1502095912645imgurl"
        src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png"
        srcset="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/78e79/pic04.png 265w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/b6a9b/pic04.png 530w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/db1e01e4eeacaf107b21d5036725e6b6/07484/pic04.png 540w"
        sizes="(max-width: 540px) 100vw, 540px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1060px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/d56e1/pic05.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABF0lEQVQoz22R206EMBCG+/4v4hNsvDUx0UQvNuqFyRIRFllAztBzob8pZJElTPKl7cz8M22HCKnR9AJuHUeLYRhvcD5rLbQZkOQt4qxBUbNJw4SCEBoNpah4C2NGkLTokeTdgjtnjnLmfKkQxiWitJ5Ir7FNXlrMepJXrptE3TnEJPjJGvhRgSAu4YW/+PQTnIIMXpjjKyqXmCtwWV1kKnhOSjwdPby8+3j9+AZlClXL0PYCXGhwqf9XqcHEjPMJaWaUQUsFOipBvCDF3eEZ949vODwcobRB3TIoPWDf7K6XcjU1JO7j3UB2pdYuaK2hlJowxtzEHFcjjAswLjHaecLbpK1gr+F6T6SUkFItD1mL9wR7Ddf2B1bRarVTnsEcAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="screencapture-54-222-128-207-1502096436141"
        title="screencapture-54-222-128-207-1502096436141"
        src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/77672/pic05.png"
        srcset="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/78e79/pic05.png 265w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/b6a9b/pic05.png 530w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/77672/pic05.png 1060w,
https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/static/9e782aaa44a7cd10ea82adf56cc731f7/d56e1/pic05.png 1130w"
        sizes="(max-width: 1060px) 100vw, 1060px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p></div></div></article><nav style="line-height: 20px; border-bottom: 1px solid #ddd; padding: 20px 0; overflow: hidden; font-size: 14px;"><div><a style="float: left;" href="/post/lodash/">« 10 个可用 ES6 替代的 Lodash 特性</a><a style="float: right;" href="/post/vscode-icon-share/">VSCode icon 分享 »</a></div></nav><div id="comment"></div><footer class="footer-module--footer--OoKls">© 2019 - Raincal's Blog - <a href="https://github.com/Raincal/gatsby-rocket-blog" target="_blank" rel="noopener noreferrer">博客源码</a><br />Powered by <a href="https://www.gatsbyjs.org" target="_blank" rel="noopener noreferrer">Gatsby</a> &amp; <a href="https://www.yuque.com" target="_blank" rel="noopener noreferrer">Yuque</a></footer></div></div></div><div id="gatsby-announcer" style="position: absolute; top: 0px; width: 1px; height: 1px; padding: 0px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0px;" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/deploy-flarumchina-with-docker/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-89682d879688fa46f48f.js"],"app":["/app-55850feab0d8b528ea96.js"],"component---theme-src-pages-404-mdx":["/component---theme-src-pages-404-mdx-88a25d13012cef9f7c77.js"],"component---theme-src-pages-about-mdx":["/component---theme-src-pages-about-mdx-a837e9cb5da06892b071.js"],"component---theme-src-pages-archives-jsx":["/component---theme-src-pages-archives-jsx-9b3113e2d2af6fe74bf2.js"],"component---theme-src-pages-links-mdx":["/component---theme-src-pages-links-mdx-5ea99bec7c57b5da9ad6.js"],"component---theme-src-pages-tags-jsx":["/component---theme-src-pages-tags-jsx-bc14fdbcd6a816bc603f.js"],"component---theme-src-templates-index-jsx":["/component---theme-src-templates-index-jsx-ccfb463f0a76c846bce3.js"],"component---theme-src-templates-post-template-jsx":["/component---theme-src-templates-post-template-jsx-27bf3499f5f2241bcd7b.js"],"component---theme-src-templates-tag-template-jsx":["/component---theme-src-templates-tag-template-jsx-fdfce7b2fb2a7abbb427.js"]};/*]]>*/</script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/polyfill-89682d879688fa46f48f.js" noModule></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/component---theme-src-templates-post-template-jsx-27bf3499f5f2241bcd7b.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/commons-49365db7d4a26f7e8692.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/app-55850feab0d8b528ea96.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/framework-44458f6db894f6a2b3e3.js" async></script><script src="https://cdn.jsdelivr.net/gh/Raincal/gatsby-theme-rocket@web/webpack-runtime-2dcd2296a0c510d5768b.js" async></script></body></html>